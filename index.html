<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>è‹±è¯­è·Ÿè¯»å­¦ä¹ ç³»ç»Ÿ</title>
    <style>
        :root {
            --primary: #10B981;
            --primary-light: #A7F3D0;
            --success: #059669;
            --warning: #F59E0B;
            --error: #EF4444;
            --background: #F0FDF4;
            --surface: #FFFFFF;
            --text: #064E3B;
            --text-light: #6B7280;
            --safe-area-inset-bottom: env(safe-area-inset-bottom, 0px);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background-color: var(--background);
            color: var(--text);
            line-height: 1.6;
            padding-bottom: var(--safe-area-inset-bottom);
        }

        .mobile-container {
            max-width: 100%;
            min-height: 100vh;
            padding: 15px;
            background: var(--background);
        }

        .card {
            background: var(--surface);
            border-radius: 16px;
            padding: 20px;
            margin-bottom: 15px;
            box-shadow: 0 2px 12px rgba(0, 0, 0, 0.08);
            border: 1px solid rgba(255, 255, 255, 0.8);
        }

        .mobile-header {
            text-align: center;
            padding: 20px 0;
            background: linear-gradient(135deg, var(--primary) 0%, #059669 100%);
            color: white;
            border-radius: 0 0 20px 20px;
            margin-bottom: 20px;
        }

        .mobile-header h1 {
            font-size: 1.4em;
            margin-bottom: 5px;
            font-weight: 600;
        }

        .btn {
            display: block;
            width: 100%;
            padding: 16px 20px;
            border: none;
            border-radius: 12px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s ease;
            text-align: center;
            margin: 8px 0;
            -webkit-appearance: none;
        }

        .btn:active {
            transform: scale(0.98);
        }

        .btn-primary {
            background-color: var(--primary);
            color: white;
        }

        .btn-secondary {
            background-color: var(--surface);
            color: var(--text);
            border: 2px solid #E2E8F0;
        }

        .btn-small {
            padding: 10px 15px;
            font-size: 14px;
            width: auto;
        }

        /* ä¸Šä¼ åŒºåŸŸæ ·å¼ */
        .upload-area {
            border: 2px dashed #E2E8F0;
            border-radius: 16px;
            padding: 40px 20px;
            text-align: center;
            margin: 20px 0;
            background: #F8FAFC;
            transition: all 0.3s ease;
        }

        .upload-area.drag-over {
            border-color: var(--primary);
            background: #F0FFF4;
        }

        .upload-icon {
            font-size: 3em;
            margin-bottom: 15px;
            color: var(--primary);
        }

        .file-input {
            display: none;
        }

        .upload-instructions {
            font-size: 0.9em;
            color: var(--text-light);
            margin: 10px 0;
        }

        /* è¡¨å•æ ·å¼ */
        .form-group {
            margin-bottom: 20px;
        }

        .form-label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--text);
        }

        .form-input, .form-textarea, .form-select {
            width: 100%;
            padding: 12px;
            border: 1px solid #E2E8F0;
            border-radius: 8px;
            font-size: 16px;
            background: white;
        }

        .form-textarea {
            resize: vertical;
            min-height: 80px;
        }

        /* å°è¯ç¼–è¾‘ */
        .dialogue-editor {
            border: 1px solid #E2E8F0;
            border-radius: 12px;
            padding: 15px;
            margin-bottom: 15px;
            background: #F8FAFC;
        }

        .dialogue-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .remove-dialogue {
            background: var(--error);
            color: white;
            border: none;
            border-radius: 6px;
            padding: 6px 12px;
            font-size: 12px;
        }

        .time-inputs {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-bottom: 10px;
        }

        /* å†…å®¹åŒºåŸŸ */
        .content-section {
            display: none;
            padding-bottom: 80px;
        }

        .content-section.active {
            display: block;
        }

        /* åº•éƒ¨å¯¼èˆª */
        .bottom-nav {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: white;
            border-top: 1px solid #E2E8F0;
            padding: 10px 15px;
            padding-bottom: calc(10px + var(--safe-area-inset-bottom));
            display: flex;
            justify-content: space-around;
            z-index: 1000;
        }

        .nav-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 8px 12px;
            border: none;
            background: none;
            font-size: 0.75em;
            color: var(--text-light);
            cursor: pointer;
            border-radius: 10px;
            min-width: 60px;
        }

        .nav-item.active {
            color: var(--primary);
        }

        .nav-icon {
            font-size: 1.4em;
            margin-bottom: 4px;
        }

        /* åŠ¨ç”»å¡ç‰‡ */
        .animation-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 12px;
            margin: 15px 0;
        }

        .animation-card {
            background: white;
            border: 1px solid #E2E8F0;
            border-radius: 16px;
            overflow: hidden;
        }

        .animation-thumbnail {
            width: 100%;
            height: 120px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            position: relative;
        }

        .animation-info {
            padding: 15px;
        }

        .animation-title {
            font-weight: 600;
            margin-bottom: 8px;
        }

        .animation-meta {
            font-size: 0.8em;
            color: var(--text-light);
            margin-bottom: 10px;
        }

        /* å“åº”å¼ */
        @media (min-width: 768px) {
            .animation-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .time-inputs {
                grid-template-columns: 1fr 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="mobile-container">
        <!-- å¤´éƒ¨ -->
        <div class="mobile-header">
            <h1>ğŸ¬ è‹±è¯­è·Ÿè¯»å­¦ä¹ </h1>
            <div class="subtitle">ä¸Šä¼ åŠ¨ç”» Â· è·Ÿè¯»ç»ƒä¹ </div>
        </div>

        <!-- ç”¨æˆ·é€‰æ‹© -->
        <div id="user-section" class="content-section active">
            <div class="card">
                <h2 style="text-align: center;">é€‰æ‹©ç”¨æˆ·</h2>
                <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 10px; margin: 15px 0;">
                    <div class="user-card" onclick="selectUser('å°æ˜')">
                        <div style="font-size: 2em;">ğŸ‘¦</div>
                        <div>å°æ˜</div>
                    </div>
                    <div class="user-card" onclick="selectUser('å°çº¢')">
                        <div style="font-size: 2em;">ğŸ‘§</div>
                        <div>å°çº¢</div>
                    </div>
                </div>
                <button class="btn btn-primary" onclick="showSection('main-section')">
                    è¿›å…¥å­¦ä¹ 
                </button>
            </div>
        </div>

        <!-- ä¸»ç•Œé¢ -->
        <div id="main-section" class="content-section">
            <div class="card">
                <h2>ğŸ“ å­¦ä¹ ä¸­å¿ƒ</h2>
                <p style="color: var(--text-light); margin: 10px 0;">æ¬¢è¿ï¼Œ<span id="currentUser">ç”¨æˆ·</span>ï¼</p>
                
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin: 15px 0;">
                    <div class="stat-card">
                        <div style="font-size: 1.5em; font-weight: bold; color: var(--primary);">3</div>
                        <div style="font-size: 0.8em;">å®ŒæˆåŠ¨ç”»</div>
                    </div>
                    <div class="stat-card">
                        <div style="font-size: 1.5em; font-weight: bold; color: var(--primary);">85%</div>
                        <div style="font-size: 0.8em;">å¹³å‡å‡†ç¡®ç‡</div>
                    </div>
                </div>
            </div>

            <div class="card">
                <h3>ğŸ“š æˆ‘çš„åŠ¨ç”»åº“</h3>
                <div class="animation-grid" id="animationLibrary">
                    <!-- åŠ¨ç”»åˆ—è¡¨åŠ¨æ€ç”Ÿæˆ -->
                </div>
                
                <button class="btn btn-secondary" onclick="showSection('upload-section')" style="margin-top: 15px;">
                    ï¼‹ ä¸Šä¼ æ–°åŠ¨ç”»
                </button>
            </div>
        </div>

        <!-- ä¸Šä¼ ç•Œé¢ -->
        <div id="upload-section" class="content-section">
            <div class="card">
                <h2>ğŸ“¤ ä¸Šä¼ åŠ¨ç”»</h2>
                <p style="color: var(--text-light); margin-bottom: 20px;">ä¸ºå­©å­ä»¬æ·»åŠ æ–°çš„å­¦ä¹ å†…å®¹</p>

                <!-- ä¸Šä¼ åŒºåŸŸ -->
                <div class="upload-area" id="uploadArea">
                    <div class="upload-icon">ğŸ“</div>
                    <h3>é€‰æ‹©åŠ¨ç”»æ–‡ä»¶</h3>
                    <p class="upload-instructions">æ”¯æŒ MP4 æ ¼å¼ï¼Œæœ€å¤§ 50MB</p>
                    <button class="btn btn-primary" onclick="document.getElementById('videoFile').click()">
                        é€‰æ‹©è§†é¢‘æ–‡ä»¶
                    </button>
                    <input type="file" id="videoFile" class="file-input" accept="video/*" onchange="handleFileSelect(event)">
                </div>

                <!-- åŠ¨ç”»ä¿¡æ¯è¡¨å• -->
                <div id="animationForm" style="display: none;">
                    <div class="form-group">
                        <label class="form-label">åŠ¨ç”»æ ‡é¢˜</label>
                        <input type="text" id="animationTitle" class="form-input" placeholder="ä¾‹å¦‚ï¼šå°çŒªä½©å¥‡ - å›½é™…æ—¥">
                    </div>

                    <div class="form-group">
                        <label class="form-label">éš¾åº¦çº§åˆ«</label>
                        <select id="animationLevel" class="form-select">
                            <option value="beginner">åˆçº§</option>
                            <option value="intermediate">ä¸­çº§</option>
                            <option value="advanced">é«˜çº§</option>
                        </select>
                    </div>

                    <h4 style="margin: 20px 0 10px 0;">ğŸ“ æ·»åŠ å°è¯</h4>
                    <div id="dialoguesContainer">
                        <!-- å°è¯ç¼–è¾‘å™¨ -->
                    </div>

                    <button class="btn btn-secondary" onclick="addDialogue()" style="width: 100%;">
                        ï¼‹ æ·»åŠ å°è¯
                    </button>

                    <div style="display: flex; gap: 10px; margin-top: 20px;">
                        <button class="btn btn-secondary" onclick="showSection('main-section')" style="flex: 1;">
                            å–æ¶ˆ
                        </button>
                        <button class="btn btn-primary" onclick="saveAnimation()" style="flex: 1;">
                            ä¿å­˜åŠ¨ç”»
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- ç»ƒä¹ ç•Œé¢ -->
        <div id="practice-section" class="content-section">
            <div class="card">
                <h2>ğŸ¤ è·Ÿè¯»ç»ƒä¹ </h2>
                <div style="text-align: center; padding: 20px 0;">
                    <div style="font-size: 3em; margin: 20px 0;">ğŸ¬</div>
                    <div style="font-size: 1.2em; margin: 15px 0; padding: 15px; background: #F8FAFC; border-radius: 10px;">
                        "Hello, how are you today?"
                    </div>
                    <button class="btn btn-primary" style="margin: 20px 0;">
                        å¼€å§‹å½•éŸ³
                    </button>
                    <button class="btn btn-secondary" onclick="showSection('main-section')">
                        è¿”å›
                    </button>
                </div>
            </div>
        </div>

        <!-- åº•éƒ¨å¯¼èˆª -->
        <div class="bottom-nav">
            <button class="nav-item" onclick="showSection('user-section')">
                <div class="nav-icon">ğŸ‘¥</div>
                <div>ç”¨æˆ·</div>
            </button>
            <button class="nav-item active" onclick="showSection('main-section')">
                <div class="nav-icon">ğŸ“</div>
                <div>å­¦ä¹ </div>
            </button>
            <button class="nav-item" onclick="showSection('upload-section')">
                <div class="nav-icon">ğŸ“¤</div>
                <div>ä¸Šä¼ </div>
            </button>
            <button class="nav-item" onclick="showSection('practice-section')">
                <div class="nav-icon">ğŸ¤</div>
                <div>ç»ƒä¹ </div>
            </button>
        </div>
    </div>

    <script>
        // å½“å‰ç¼–è¾‘çš„åŠ¨ç”»æ•°æ®
        let currentAnimation = {
            title: '',
            level: 'beginner',
            videoFile: null,
            videoUrl: null,
            dialogues: []
        };

        // æ˜¾ç¤º/éšè—åŒºåŸŸ
        function showSection(sectionId) {
            document.querySelectorAll('.content-section').forEach(section => {
                section.classList.remove('active');
            });
            document.getElementById(sectionId).classList.add('active');
            
            // æ›´æ–°å¯¼èˆªçŠ¶æ€
            updateNavState(sectionId);
            
            // å¦‚æœæ˜¯ä¸»ç•Œé¢ï¼ŒåŠ è½½åŠ¨ç”»åº“
            if (sectionId === 'main-section') {
                loadAnimationLibrary();
            }
        }

        // æ›´æ–°å¯¼èˆªçŠ¶æ€
        function updateNavState(activeSection) {
            document.querySelectorAll('.nav-item').forEach(item => {
                item.classList.remove('active');
            });
            
            const navMap = {
                'user-section': 0,
                'main-section': 1,
                'upload-section': 2,
                'practice-section': 3
            };
            
            if (navMap[activeSection] !== undefined) {
                document.querySelectorAll('.nav-item')[navMap[activeSection]].classList.add('active');
            }
        }

        // é€‰æ‹©ç”¨æˆ·
        function selectUser(userName) {
            document.getElementById('currentUser').textContent = userName;
            showSection('main-section');
        }

        // å¤„ç†æ–‡ä»¶é€‰æ‹©
        function handleFileSelect(event) {
            const file = event.target.files[0];
            if (file) {
                processVideoFile(file);
            }
        }

        // å¤„ç†è§†é¢‘æ–‡ä»¶
        function processVideoFile(file) {
            if (!file.type.startsWith('video/')) {
                alert('è¯·é€‰æ‹©è§†é¢‘æ–‡ä»¶ï¼ˆMP4æ ¼å¼ï¼‰');
                return;
            }

            if (file.size > 50 * 1024 * 1024) {
                alert('æ–‡ä»¶å¤§å°ä¸èƒ½è¶…è¿‡50MB');
                return;
            }

            currentAnimation.videoFile = file;
            currentAnimation.videoUrl = URL.createObjectURL(file);
            
            // æ˜¾ç¤ºè¡¨å•
            document.getElementById('animationForm').style.display = 'block';
            document.getElementById('uploadArea').style.display = 'none';
            
            // è‡ªåŠ¨ç”Ÿæˆæ ‡é¢˜
            const title = file.name.replace(/\.[^/.]+$/, "");
            document.getElementById('animationTitle').value = title;
            
            // æ·»åŠ ä¸€ä¸ªç¤ºä¾‹å°è¯
            addDialogue();
        }

        // æ·»åŠ å°è¯ç¼–è¾‘å™¨
        function addDialogue() {
            const container = document.getElementById('dialoguesContainer');
            const index = currentAnimation.dialogues.length;
            
            const dialogueEditor = document.createElement('div');
            dialogueEditor.className = 'dialogue-editor';
            dialogueEditor.innerHTML = `
                <div class="dialogue-header">
                    <strong>å°è¯ #${index + 1}</strong>
                    <button type="button" class="remove-dialogue" onclick="removeDialogue(${index})">åˆ é™¤</button>
                </div>
                <div class="time-inputs">
                    <div>
                        <label style="font-size: 0.8em;">å¼€å§‹æ—¶é—´ï¼ˆç§’ï¼‰</label>
                        <input type="number" class="form-input" value="0" min="0" step="1" 
                               onchange="updateDialogueTime(${index}, 'startTime', this.value)">
                    </div>
                    <div>
                        <label style="font-size: 0.8em;">ç»“æŸæ—¶é—´ï¼ˆç§’ï¼‰</label>
                        <input type="number" class="form-input" value="5" min="0" step="1"
                               onchange="updateDialogueTime(${index}, 'endTime', this.value)">
                    </div>
                </div>
                <div style="margin-top: 10px;">
                    <label style="font-size: 0.8em;">è§’è‰²åç§°</label>
                    <input type="text" class="form-input" placeholder="ä¾‹å¦‚ï¼šPeppa"
                           onchange="updateDialogueField(${index}, 'character', this.value)">
                </div>
                <div style="margin-top: 10px;">
                    <label style="font-size: 0.8em;">å°è¯å†…å®¹</label>
                    <textarea class="form-input" placeholder="è¾“å…¥è‹±æ–‡å°è¯..." style="height: 60px;"
                              onchange="updateDialogueField(${index}, 'text', this.value)"></textarea>
                </div>
            `;
            
            container.appendChild(dialogueEditor);
            
            // æ·»åŠ åˆ°æ•°æ®æ¨¡å‹
            currentAnimation.dialogues.push({
                startTime: 0,
                endTime: 5,
                character: '',
                text: ''
            });
        }

        // ç§»é™¤å°è¯
        function removeDialogue(index) {
            currentAnimation.dialogues.splice(index, 1);
            renderDialogues();
        }

        // æ›´æ–°å°è¯æ—¶é—´
        function updateDialogueTime(index, field, value) {
            if (currentAnimation.dialogues[index]) {
                currentAnimation.dialogues[index][field] = parseFloat(value);
            }
        }

        // æ›´æ–°å°è¯å­—æ®µ
        function updateDialogueField(index, field, value) {
            if (currentAnimation.dialogues[index]) {
                currentAnimation.dialogues[index][field] = value;
            }
        }

        // é‡æ–°æ¸²æŸ“å°è¯
        function renderDialogues() {
            const container = document.getElementById('dialoguesContainer');
            container.innerHTML = '';
            currentAnimation.dialogues.forEach((dialogue, index) => {
                const dialogueEditor = document.createElement('div');
                dialogueEditor.className = 'dialogue-editor';
                dialogueEditor.innerHTML = `
                    <div class="dialogue-header">
                        <strong>å°è¯ #${index + 1}</strong>
                        <button type="button" class="remove-dialogue" onclick="removeDialogue(${index})">åˆ é™¤</button>
                    </div>
                    <div class="time-inputs">
                        <div>
                            <label style="font-size: 0.8em;">å¼€å§‹æ—¶é—´ï¼ˆç§’ï¼‰</label>
                            <input type="number" class="form-input" value="${dialogue.startTime}" min="0" step="1" 
                                   onchange="updateDialogueTime(${index}, 'startTime', this.value)">
                        </div>
                        <div>
                            <label style="font-size: 0.8em;">ç»“æŸæ—¶é—´ï¼ˆç§’ï¼‰</label>
                            <input type="number" class="form-input" value="${dialogue.endTime}" min="0" step="1"
                                   onchange="updateDialogueTime(${index}, 'endTime', this.value)">
                        </div>
                    </div>
                    <div style="margin-top: 10px;">
                        <label style="font-size: 0.8em;">è§’è‰²åç§°</label>
                        <input type="text" class="form-input" value="${dialogue.character}" placeholder="ä¾‹å¦‚ï¼šPeppa"
                               onchange="updateDialogueField(${index}, 'character', this.value)">
                    </div>
                    <div style="margin-top: 10px;">
                        <label style="font-size: 0.8em;">å°è¯å†…å®¹</label>
                        <textarea class="form-input" style="height: 60px;"
                                  onchange="updateDialogueField(${index}, 'text', this.value)">${dialogue.text}</textarea>
                    </div>
                `;
                container.appendChild(dialogueEditor);
            });
        }

        // ä¿å­˜åŠ¨ç”»
        function saveAnimation() {
            // æ”¶é›†è¡¨å•æ•°æ®
            currentAnimation.title = document.getElementById('animationTitle').value;
            currentAnimation.level = document.getElementById('animationLevel').value;

            // éªŒè¯æ•°æ®
            if (!currentAnimation.title.trim()) {
                alert('è¯·è¾“å…¥åŠ¨ç”»æ ‡é¢˜');
                return;
            }

            if (currentAnimation.dialogues.length === 0) {
                alert('è¯·è‡³å°‘æ·»åŠ ä¸€æ¡å°è¯');
                return;
            }

            // ä¿å­˜åˆ°æœ¬åœ°å­˜å‚¨
            const library = getAnimationLibrary();
            const animationId = 'animation_' + Date.now();
            
            library[animationId] = {
                ...currentAnimation,
                id: animationId,
                createdAt: new Date().toISOString()
            };
            
            localStorage.setItem('english_animation_library', JSON.stringify(library));
            
            alert('âœ… åŠ¨ç”»å†…å®¹ä¿å­˜æˆåŠŸï¼');
            
            // é‡ç½®è¡¨å•å¹¶è¿”å›ä¸»ç•Œé¢
            resetUploadForm();
            showSection('main-section');
        }

        // è·å–åŠ¨ç”»åº“
        function getAnimationLibrary() {
            const stored = localStorage.getItem('english_animation_library');
            return stored ? JSON.parse(stored) : {};
        }

        // åŠ è½½åŠ¨ç”»åº“
        function loadAnimationLibrary() {
            const library = getAnimationLibrary();
            const container = document.getElementById('animationLibrary');
            
            if (Object.keys(library).length === 0) {
                container.innerHTML = `
                    <div style="text-align: center; padding: 40px 20px; color: var(--text-light);">
                        <div style="font-size: 3em; margin-bottom: 15px;">ğŸ“º</div>
                        <p>è¿˜æ²¡æœ‰åŠ¨ç”»å†…å®¹</p>
                        <p style="font-size: 0.9em; margin-top: 10px;">ç‚¹å‡»"ä¸Šä¼ æ–°åŠ¨ç”»"æ·»åŠ å†…å®¹</p>
                    </div>
                `;
                return;
            }
            
            let html = '';
            Object.values(library).forEach(animation => {
                html += `
                    <div class="animation-card">
                        <div class="animation-thumbnail">
                            ğŸ¬ ${animation.title}
                        </div>
                        <div class="animation-info">
                            <div class="animation-title">${animation.title}</div>
                            <div class="animation-meta">
                                éš¾åº¦: ${getLevelText(animation.level)} | 
                                å°è¯: ${animation.dialogues.length}å¥
                            </div>
                            <button class="btn btn-primary btn-small" onclick="startPractice('${animation.id}')" style="width: 100%;">
                                å¼€å§‹ç»ƒä¹ 
                            </button>
                        </div>
                    </div>
                `;
            });
            
            container.innerHTML = html;
        }

        // å¼€å§‹ç»ƒä¹ 
        function startPractice(animationId) {
            // ä¿å­˜å½“å‰ç»ƒä¹ çš„åŠ¨ç”»ID
            localStorage.setItem('current_practice_animation', animationId);
            
            // è·³è½¬åˆ°ç»ƒä¹ ç•Œé¢
            showSection('practice-section');
            
            // åœ¨å®é™…å®Œæ•´ç‰ˆæœ¬ä¸­ï¼Œè¿™é‡Œä¼šåŠ è½½å…·ä½“çš„ç»ƒä¹ å†…å®¹
            alert('å¼€å§‹ç»ƒä¹ ï¼åœ¨å®é™…å®Œæ•´ç‰ˆæœ¬ä¸­ï¼Œè¿™é‡Œä¼šåŠ è½½å…·ä½“çš„åŠ¨ç”»å’Œå°è¯ã€‚');
        }

        // é‡ç½®ä¸Šä¼ è¡¨å•
        function resetUploadForm() {
            currentAnimation = {
                title: '',
                level: 'beginner',
                videoFile: null,
                videoUrl: null,
                dialogues: []
            };
            
            document.getElementById('animationForm').style.display = 'none';
            document.getElementById('uploadArea').style.display = 'block';
            document.getElementById('videoFile').value = '';
            document.getElementById('dialoguesContainer').innerHTML = '';
        }

        // å·¥å…·å‡½æ•°
        function getLevelText(level) {
            const levels = {
                'beginner': 'åˆçº§',
                'intermediate': 'ä¸­çº§',
                'advanced': 'é«˜çº§'
            };
            return levels[level] || level;
        }

        // åˆå§‹åŒ–ç¤ºä¾‹æ•°æ®
        function initializeSampleData() {
            if (Object.keys(getAnimationLibrary()).length === 0) {
                const sampleAnimation = {
                    id: 'sample_1',
                    title: 'å°çŒªä½©å¥‡ - å›½é™…æ—¥',
                    level: 'beginner',
                    dialogues: [
                        {
                            startTime: 10,
                            endTime: 15,
                            character: 'Peppa',
                            text: "I'm France! George is Russia."
                        },
                        {
                            startTime: 16,
                            endTime: 20,
                            character: 'Suzy',
                            text: "Hello! That's Dutch for hello."
                        }
                    ],
                    createdAt: new Date().toISOString()
                };
                
                const library = {};
                library[sampleAnimation.id] = sampleAnimation;
                localStorage.setItem('english_animation_library', JSON.stringify(library));
            }
        }

        // åˆå§‹åŒ–åº”ç”¨
        document.addEventListener('DOMContentLoaded', function() {
            initializeSampleData();
            loadAnimationLibrary();
        });
    </script>
</body>
</html>
