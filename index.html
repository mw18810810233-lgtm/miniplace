<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è‹±è¯­è·Ÿè¯»å­¦ä¹ ç³»ç»Ÿ - æ™ºèƒ½ç‰ˆ</title>
    <style>
        :root {
            --primary: #10B981;
            --primary-light: #A7F3D0;
            --success: #059669;
            --warning: #F59E0B;
            --error: #EF4444;
            --background: #F0FDF4;
            --surface: #FFFFFF;
            --text: #064E3B;
            --text-light: #6B7280;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background-color: var(--background);
            color: var(--text);
            line-height: 1.6;
        }

        .container {
            background: var(--surface);
            padding: 30px;
            border-radius: 20px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.06);
            margin-bottom: 20px;
        }

        h1 {
            color: var(--primary);
            text-align: center;
            margin-bottom: 10px;
        }

        .tabs {
            display: flex;
            margin-bottom: 20px;
            border-bottom: 2px solid #E2E8F0;
        }

        .tab {
            padding: 12px 24px;
            cursor: pointer;
            border-bottom: 3px solid transparent;
            transition: all 0.3s ease;
        }

        .tab.active {
            border-bottom-color: var(--primary);
            color: var(--primary);
            font-weight: 600;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 10px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            margin: 5px;
        }

        .btn-primary {
            background-color: var(--primary);
            color: white;
        }

        .btn-primary:hover {
            background-color: #0DA271;
        }

        .btn-secondary {
            background-color: var(--surface);
            color: var(--text);
            border: 1px solid #E2E8F0;
        }

        .upload-area {
            border: 2px dashed #E2E8F0;
            border-radius: 12px;
            padding: 40px;
            text-align: center;
            margin: 20px 0;
            background: #F8FAFC;
        }

        .video-preview {
            width: 100%;
            max-width: 600px;
            margin: 20px auto;
            border-radius: 12px;
            overflow: hidden;
            background: #000;
        }

        .video-preview video {
            width: 100%;
            height: auto;
        }

        .subtitle-auto-generate {
            background: #E0F2FE;
            border: 1px solid #0EA5E9;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
        }

        .subtitle-options {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 15px 0;
        }

        .option-card {
            background: white;
            border: 2px solid #E2E8F0;
            border-radius: 10px;
            padding: 20px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .option-card:hover {
            border-color: var(--primary);
        }

        .option-card.selected {
            border-color: var(--primary);
            background: var(--primary-light);
        }

        .animation-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .animation-card {
            border: 1px solid #E2E8F0;
            border-radius: 12px;
            overflow: hidden;
            background: white;
        }

        .animation-video {
            width: 100%;
            height: 200px;
            background: #000;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
        }

        .animation-info {
            padding: 15px;
        }

        .progress-bar {
            height: 6px;
            background: #E2E8F0;
            border-radius: 3px;
            margin: 10px 0;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: var(--primary);
            border-radius: 3px;
            transition: width 0.3s ease;
        }

        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid #f3f3f3;
            border-top: 3px solid var(--primary);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .subtitle-editor {
            max-height: 400px;
            overflow-y: auto;
            border: 1px solid #E2E8F0;
            border-radius: 8px;
            padding: 15px;
            margin: 15px 0;
            background: #F8FAFC;
        }

        .subtitle-item {
            display: flex;
            align-items: center;
            padding: 10px;
            border-bottom: 1px solid #E2E8F0;
        }

        .subtitle-item:last-child {
            border-bottom: none;
        }

        .subtitle-time {
            font-weight: bold;
            margin-right: 15px;
            min-width: 80px;
        }

        .subtitle-text {
            flex: 1;
        }
    </style>
</head>
<body>
    <!-- å¯¼èˆªæ ‡ç­¾ -->
    <div class="tabs">
        <div class="tab active" onclick="switchTab('upload')">ğŸ“¤ ä¸Šä¼ è§†é¢‘</div>
        <div class="tab" onclick="switchTab('library')">ğŸ“š è§†é¢‘åº“</div>
        <div class="tab" onclick="switchTab('practice')">ğŸ¬ è·Ÿè¯»ç»ƒä¹ </div>
    </div>

    <!-- ä¸Šä¼ è§†é¢‘æ ‡ç­¾é¡µ -->
    <div id="upload-tab" class="tab-content active">
        <div class="container">
            <h1>ğŸ“¤ ä¸Šä¼ è§†é¢‘</h1>
            <p style="text-align: center; color: var(--text-light); margin-bottom: 30px;">
                æ”¯æŒè‡ªåŠ¨å­—å¹•è¯†åˆ«ï¼Œè®©è§†é¢‘åˆ¶ä½œæ›´è½»æ¾
            </p>

            <!-- æ–‡ä»¶ä¸Šä¼  -->
            <div class="upload-area" id="uploadArea">
                <div style="font-size: 48px; margin-bottom: 15px;">ğŸ“</div>
                <h3>é€‰æ‹©è§†é¢‘æ–‡ä»¶</h3>
                <p style="color: var(--text-light); margin: 10px 0;">æ”¯æŒ MP4 æ ¼å¼ï¼Œæœ€å¤§ 100MB</p>
                <button class="btn btn-primary" onclick="document.getElementById('videoFile').click()">
                    é€‰æ‹©è§†é¢‘æ–‡ä»¶
                </button>
                <input type="file" id="videoFile" class="file-input" accept="video/*" onchange="handleFileSelect(event)">
            </div>

            <!-- è§†é¢‘é¢„è§ˆ -->
            <div id="videoPreview" class="video-preview" style="display: none;">
                <video id="previewPlayer" controls></video>
            </div>

            <!-- è‡ªåŠ¨å­—å¹•ç”Ÿæˆ -->
            <div id="subtitleSection" style="display: none;">
                <div class="subtitle-auto-generate">
                    <h3>ğŸ¯ è‡ªåŠ¨å­—å¹•ç”Ÿæˆ</h3>
                    <p>é€‰æ‹©å­—å¹•ç”Ÿæˆæ–¹å¼ï¼š</p>
                    
                    <div class="subtitle-options">
                        <div class="option-card" onclick="selectSubtitleOption('auto')">
                            <div style="font-size: 2em;">ğŸ¤–</div>
                            <h4>AIè‡ªåŠ¨è¯†åˆ«</h4>
                            <p style="font-size: 0.9em; color: var(--text-light);">
                                ä½¿ç”¨AIè‡ªåŠ¨è¯†åˆ«è§†é¢‘ä¸­çš„å¯¹è¯
                            </p>
                        </div>
                        
                        <div class="option-card" onclick="selectSubtitleOption('manual')">
                            <div style="font-size: 2em;">âœï¸</div>
                            <h4>æ‰‹åŠ¨è¾“å…¥</h4>
                            <p style="font-size: 0.9em; color: var(--text-light);">
                                æ‰‹åŠ¨è¾“å…¥å°è¯å’Œæ—¶é—´ç‚¹
                            </p>
                        </div>
                        
                        <div class="option-card" onclick="selectSubtitleOption('template')">
                            <div style="font-size: 2em;">ğŸ“</div>
                            <h4>ä½¿ç”¨æ¨¡æ¿</h4>
                            <p style="font-size: 0.9em; color: var(--text-light);">
                                é€‰æ‹©é¢„è®¾çš„å¯¹è¯æ¨¡æ¿
                            </p>
                        </div>
                    </div>

                    <!-- AIè¯†åˆ«é€‰é¡¹ -->
                    <div id="aiOptions" style="display: none; margin-top: 20px;">
                        <h4>AIè¯†åˆ«è®¾ç½®</h4>
                        <div style="display: flex; gap: 15px; margin: 15px 0;">
                            <select id="languageSelect" class="form-select">
                                <option value="en">è‹±è¯­</option>
                                <option value="zh">ä¸­æ–‡</option>
                                <option value="ja">æ—¥è¯­</option>
                            </select>
                            <button class="btn btn-primary" onclick="generateSubtitles()" id="generateBtn">
                                å¼€å§‹ç”Ÿæˆå­—å¹•
                            </button>
                        </div>
                    </div>

                    <!-- å­—å¹•é¢„è§ˆ -->
                    <div id="subtitlePreview" style="display: none; margin-top: 20px;">
                        <h4>ç”Ÿæˆçš„å­—å¹•</h4>
                        <div class="subtitle-editor" id="subtitleEditor">
                            <!-- å­—å¹•å†…å®¹å°†åœ¨è¿™é‡Œæ˜¾ç¤º -->
                        </div>
                        <button class="btn btn-primary" onclick="saveVideoWithSubtitles()">
                            ä¿å­˜è§†é¢‘å’Œå­—å¹•
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- è§†é¢‘åº“æ ‡ç­¾é¡µ -->
    <div id="library-tab" class="tab-content">
        <div class="container">
            <h1>ğŸ“š è§†é¢‘åº“</h1>
            <p style="text-align: center; color: var(--text-light); margin-bottom: 30px;">
                æ‰€æœ‰å·²ä¸Šä¼ çš„è§†é¢‘å†…å®¹
            </p>

            <div class="animation-grid" id="videoLibrary">
                <!-- è§†é¢‘å¡ç‰‡å°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
            </div>
        </div>
    </div>

    <!-- è·Ÿè¯»ç»ƒä¹ æ ‡ç­¾é¡µ -->
    <div id="practice-tab" class="tab-content">
        <div class="container">
            <h1>ğŸ¬ è·Ÿè¯»ç»ƒä¹ </h1>
            <p style="text-align: center; color: var(--text-light); margin-bottom: 30px;">
                é€‰æ‹©è§†é¢‘å¼€å§‹è‹±è¯­è·Ÿè¯»ç»ƒä¹ 
            </p>

            <div class="animation-grid" id="practiceLibrary">
                <!-- ç»ƒä¹ ç”¨çš„è§†é¢‘å¡ç‰‡ -->
            </div>
        </div>
    </div>

    <script>
        // å­˜å‚¨è§†é¢‘æ•°æ®çš„é”®å
        const VIDEO_LIBRARY_KEY = 'english_video_library';
        
        // å½“å‰å¤„ç†çš„è§†é¢‘æ•°æ®
        let currentVideo = {
            file: null,
            url: null,
            title: '',
            subtitles: [],
            duration: 0
        };

        let selectedSubtitleOption = '';

        // åˆ‡æ¢æ ‡ç­¾é¡µ
        function switchTab(tabName) {
            document.querySelectorAll('.tab').forEach(tab => {
                tab.classList.remove('active');
            });
            document.querySelectorAll('.tab-content').forEach(content => {
                content.classList.remove('active');
            });
            
            event.target.classList.add('active');
            document.getElementById(`${tabName}-tab`).classList.add('active');
            
            if (tabName === 'library') {
                loadVideoLibrary();
            } else if (tabName === 'practice') {
                loadPracticeLibrary();
            }
        }

        // å¤„ç†æ–‡ä»¶é€‰æ‹©
        function handleFileSelect(event) {
            const file = event.target.files[0];
            if (file) {
                processVideoFile(file);
            }
        }

        // å¤„ç†è§†é¢‘æ–‡ä»¶
        function processVideoFile(file) {
            if (!file.type.startsWith('video/')) {
                alert('è¯·é€‰æ‹©è§†é¢‘æ–‡ä»¶');
                return;
            }

            currentVideo.file = file;
            currentVideo.url = URL.createObjectURL(file);
            
            // æ˜¾ç¤ºè§†é¢‘é¢„è§ˆ
            const previewPlayer = document.getElementById('previewPlayer');
            previewPlayer.src = currentVideo.url;
            document.getElementById('videoPreview').style.display = 'block';
            
            // è·å–è§†é¢‘æ—¶é•¿
            previewPlayer.onloadedmetadata = function() {
                currentVideo.duration = previewPlayer.duration;
                currentVideo.title = file.name.replace(/\.[^/.]+$/, "");
            };
            
            // æ˜¾ç¤ºå­—å¹•é€‰é¡¹
            document.getElementById('subtitleSection').style.display = 'block';
            
            // éšè—ä¸Šä¼ åŒºåŸŸ
            document.getElementById('uploadArea').style.display = 'none';
        }

        // é€‰æ‹©å­—å¹•ç”Ÿæˆæ–¹å¼
        function selectSubtitleOption(option) {
            selectedSubtitleOption = option;
            
            // æ›´æ–°UIçŠ¶æ€
            document.querySelectorAll('.option-card').forEach(card => {
                card.classList.remove('selected');
            });
            event.target.classList.add('selected');
            
            // æ˜¾ç¤ºå¯¹åº”çš„é€‰é¡¹
            document.getElementById('aiOptions').style.display = 
                option === 'auto' ? 'block' : 'none';
            
            if (option === 'template') {
                loadSubtitlesTemplate();
            } else if (option === 'manual') {
                showManualEditor();
            }
        }

        // ç”Ÿæˆå­—å¹•ï¼ˆæ¨¡æ‹ŸAIè¯†åˆ«ï¼‰
        function generateSubtitles() {
            const generateBtn = document.getElementById('generateBtn');
            const originalText = generateBtn.innerHTML;
            
            // æ˜¾ç¤ºåŠ è½½çŠ¶æ€
            generateBtn.innerHTML = '<span class="loading"></span> æ­£åœ¨ç”Ÿæˆå­—å¹•...';
            generateBtn.disabled = true;
            
            // æ¨¡æ‹ŸAIå¤„ç†æ—¶é—´
            setTimeout(() => {
                // ç”Ÿæˆæ¨¡æ‹Ÿå­—å¹•æ•°æ®
                const mockSubtitles = generateMockSubtitles();
                currentVideo.subtitles = mockSubtitles;
                
                // æ˜¾ç¤ºå­—å¹•é¢„è§ˆ
                displaySubtitlesPreview(mockSubtitles);
                
                // æ¢å¤æŒ‰é’®çŠ¶æ€
                generateBtn.innerHTML = originalText;
                generateBtn.disabled = false;
                
                document.getElementById('subtitlePreview').style.display = 'block';
            }, 3000);
        }

        // ç”Ÿæˆæ¨¡æ‹Ÿå­—å¹•æ•°æ®
        function generateMockSubtitles() {
            const subtitles = [];
            const phrases = [
                "Hello, how are you today?",
                "I'm learning English with this app.",
                "This is so much fun!",
                "Let's practice speaking together.",
                "The weather is really nice today.",
                "What's your favorite color?",
                "I like to read books in my free time.",
                "Can you help me with this exercise?",
                "That's a great idea!",
                "Thank you for your help."
            ];
            
            let currentTime = 0;
            const segmentDuration = currentVideo.duration / phrases.length;
            
            phrases.forEach((phrase, index) => {
                subtitles.push({
                    startTime: currentTime,
                    endTime: currentTime + segmentDuration,
                    text: phrase,
                    character: index % 2 === 0 ? "Teacher" : "Student"
                });
                currentTime += segmentDuration;
            });
            
            return subtitles;
        }

        // æ˜¾ç¤ºå­—å¹•é¢„è§ˆ
        function displaySubtitlesPreview(subtitles) {
            const editor = document.getElementById('subtitleEditor');
            let html = '';
            
            subtitles.forEach((subtitle, index) => {
                const startTime = formatTime(subtitle.startTime);
                const endTime = formatTime(subtitle.endTime);
                
                html += `
                    <div class="subtitle-item">
                        <div class="subtitle-time">${startTime} - ${endTime}</div>
                        <div class="subtitle-text">
                            <strong>${subtitle.character}:</strong> ${subtitle.text}
                        </div>
                    </div>
                `;
            });
            
            editor.innerHTML = html;
        }

        // åŠ è½½å­—å¹•æ¨¡æ¿
        function loadSubtitlesTemplate() {
            const templates = {
                'basic': [
                    { startTime: 0, endTime: 5, character: "Teacher", text: "Good morning class!" },
                    { startTime: 5, endTime: 10, character: "Students", text: "Good morning teacher!" },
                    { startTime: 10, endTime: 15, character: "Teacher", text: "How is everyone today?" }
                ],
                'conversation': [
                    { startTime: 0, endTime: 4, character: "A", text: "Hi, how are you?" },
                    { startTime: 4, endTime: 8, character: "B", text: "I'm good, thank you!" },
                    { startTime: 8, endTime: 12, character: "A", text: "What did you do yesterday?" }
                ]
            };
            
            // è®©ç”¨æˆ·é€‰æ‹©æ¨¡æ¿
            const templateChoice = prompt('é€‰æ‹©æ¨¡æ¿ï¼š\n1. åŸºç¡€å¯¹è¯\n2. æ—¥å¸¸äº¤æµ', '1');
            const templateKey = templateChoice === '2' ? 'conversation' : 'basic';
            
            currentVideo.subtitles = templates[templateKey];
            displaySubtitlesPreview(currentVideo.subtitles);
            document.getElementById('subtitlePreview').style.display = 'block';
        }

        // æ˜¾ç¤ºæ‰‹åŠ¨ç¼–è¾‘å™¨
        function showManualEditor() {
            currentVideo.subtitles = [
                { startTime: 0, endTime: 5, character: "", text: "" }
            ];
            displaySubtitlesPreview(currentVideo.subtitles);
            document.getElementById('subtitlePreview').style.display = 'block';
        }

        // ä¿å­˜è§†é¢‘å’Œå­—å¹•
        function saveVideoWithSubtitles() {
            if (!currentVideo.title.trim()) {
                alert('è¯·ä¸ºè§†é¢‘è®¾ç½®æ ‡é¢˜');
                return;
            }

            if (currentVideo.subtitles.length === 0) {
                alert('è¯·è‡³å°‘æ·»åŠ ä¸€æ¡å­—å¹•');
                return;
            }

            // ä¿å­˜åˆ°æœ¬åœ°å­˜å‚¨
            const library = getVideoLibrary();
            const videoId = 'video_' + Date.now();
            
            library[videoId] = {
                id: videoId,
                title: currentVideo.title,
                videoUrl: currentVideo.url,
                subtitles: currentVideo.subtitles,
                duration: currentVideo.duration,
                createdAt: new Date().toISOString()
            };
            
            localStorage.setItem(VIDEO_LIBRARY_KEY, JSON.stringify(library));
            
            alert('âœ… è§†é¢‘å’Œå­—å¹•ä¿å­˜æˆåŠŸï¼');
            
            // é‡ç½®è¡¨å•
            resetUploadForm();
            
            // åˆ·æ–°è§†é¢‘åº“
            loadVideoLibrary();
            
            // åˆ‡æ¢åˆ°è§†é¢‘åº“æ ‡ç­¾é¡µ
            switchTab('library');
        }

        // è·å–è§†é¢‘åº“
        function getVideoLibrary() {
            const stored = localStorage.getItem(VIDEO_LIBRARY_KEY);
            return stored ? JSON.parse(stored) : {};
        }

        // åŠ è½½è§†é¢‘åº“
        function loadVideoLibrary() {
            const library = getVideoLibrary();
            const container = document.getElementById('videoLibrary');
            
            if (Object.keys(library).length === 0) {
                container.innerHTML = '<p style="text-align: center; color: var(--text-light);">è¿˜æ²¡æœ‰ä¸Šä¼ ä»»ä½•è§†é¢‘</p>';
                return;
            }
            
            let html = '';
            Object.values(library).forEach(video => {
                html += `
                    <div class="animation-card">
                        <div class="animation-video">
                            <video src="${video.videoUrl}" style="width: 100%; height: 100%; object-fit: cover;"></video>
                        </div>
                        <div class="animation-info">
                            <h3>${video.title}</h3>
                            <p style="color: var(--text-light); font-size: 0.9em;">
                                æ—¶é•¿: ${formatTime(video.duration)} | å­—å¹•: ${video.subtitles.length}æ¡
                            </p>
                            <div class="progress-bar">
                                <div class="progress-fill" style="width: 0%"></div>
                            </div>
                            <div style="display: flex; gap: 8px; margin-top: 10px;">
                                <button class="btn btn-primary btn-small" onclick="playVideo('${video.id}')">æ’­æ”¾</button>
                                <button class="btn btn-secondary btn-small" onclick="practiceVideo('${video.id}')">ç»ƒä¹ </button>
                                <button class="btn btn-secondary btn-small" onclick="deleteVideo('${video.id}')">åˆ é™¤</button>
                            </div>
                        </div>
                    </div>
                `;
            });
            
            container.innerHTML = html;
        }

        // åŠ è½½ç»ƒä¹ åº“
        function loadPracticeLibrary() {
            const library = getVideoLibrary();
            const container = document.getElementById('practiceLibrary');
            
            if (Object.keys(library).length === 0) {
                container.innerHTML = '<p style="text-align: center; color: var(--text-light);">è¯·å…ˆä¸Šä¼ è§†é¢‘å†…å®¹</p>';
                return;
            }
            
            let html = '';
            Object.values(library).forEach(video => {
                html += `
                    <div class="animation-card">
                        <div class="animation-video">
                            <video src="${video.videoUrl}" style="width: 100%; height: 100%; object-fit: cover;"></video>
                        </div>
                        <div class="animation-info">
                            <h3>${video.title}</h3>
                            <p style="color: var(--text-light); font-size: 0.9em;">
                                ${video.subtitles.length}å¥å¯¹è¯
                            </p>
                            <button class="btn btn-primary" onclick="practiceVideo('${video.id}')" style="width: 100%;">
                                å¼€å§‹è·Ÿè¯»ç»ƒä¹ 
                            </button>
                        </div>
                    </div>
                `;
            });
            
            container.innerHTML = html;
        }

        // æ’­æ”¾è§†é¢‘
        function playVideo(videoId) {
            const library = getVideoLibrary();
            const video = library[videoId];
            
            if (video) {
                // åœ¨æ–°çª—å£æˆ–æ¨¡æ€æ¡†ä¸­æ’­æ”¾è§†é¢‘
                const videoWindow = window.open('', '_blank');
                videoWindow.document.write(`
                    <!DOCTYPE html>
                    <html>
                    <head>
                        <title>${video.title}</title>
                        <style>
                            body { margin: 0; padding: 20px; background: #000; }
                            video { width: 100%; max-width: 800px; }
                        </style>
                    </head>
                    <body>
                        <video controls autoplay>
                            <source src="${video.videoUrl}" type="video/mp4">
                        </video>
                    </body>
                    </html>
                `);
            }
        }

        // ç»ƒä¹ è§†é¢‘
        function practiceVideo(videoId) {
            alert('å¼€å§‹è·Ÿè¯»ç»ƒä¹ ï¼åœ¨å®é™…å®Œæ•´ç‰ˆæœ¬ä¸­ï¼Œè¿™é‡Œä¼šåŠ è½½å®Œæ•´çš„ç»ƒä¹ ç•Œé¢ã€‚');
            // è¿™é‡Œå¯ä»¥è·³è½¬åˆ°ç»ƒä¹ ç•Œé¢
        }

        // åˆ é™¤è§†é¢‘
        function deleteVideo(videoId) {
            if (confirm('ç¡®å®šè¦åˆ é™¤è¿™ä¸ªè§†é¢‘å—ï¼Ÿ')) {
                const library = getVideoLibrary();
                delete library[videoId];
                localStorage.setItem(VIDEO_LIBRARY_KEY, JSON.stringify(library));
                loadVideoLibrary();
                loadPracticeLibrary();
            }
        }

        // é‡ç½®ä¸Šä¼ è¡¨å•
        function resetUploadForm() {
            currentVideo = {
                file: null,
                url: null,
                title: '',
                subtitles: [],
                duration: 0
            };
            
            document.getElementById('uploadArea').style.display = 'block';
            document.getElementById('videoPreview').style.display = 'none';
            document.getElementById('subtitleSection').style.display = 'none';
            document.getElementById('subtitlePreview').style.display = 'none';
            document.getElementById('videoFile').value = '';
            
            document.querySelectorAll('.option-card').forEach(card => {
                card.classList.remove('selected');
            });
        }

        // å·¥å…·å‡½æ•°ï¼šæ ¼å¼åŒ–æ—¶é—´
        function formatTime(seconds) {
            const mins = Math.floor(seconds / 60);
            const secs = Math.floor(seconds % 60);
            return `${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;
        }

        // åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            loadVideoLibrary();
            loadPracticeLibrary();
        });
    </script>
</body>
</html>
